<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Think Bits • Treasure Hunt Hub</title>
  <link rel="icon" href="assets/thinkbits-logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-grid" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand">
      <img class="logo" src="assets/thinkbits-logo.png" alt="Think Bits logo" />
      <div class="brandText">
        <div class="club">THINK BITS</div>
        <div class="tag">Data Science Club • Riddle Hunt Hub</div>
      </div>
    </div>

    <div class="topActions">
      <button id="btnRules" class="btn ghost">Rules</button>
      <button id="btnAdmin" class="btn ghost">Admin</button>
      <button id="btnFullscreen" class="btn">Fullscreen</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <div class="panelTitle">Teams</div>

      <form id="teamForm" class="teamForm" autocomplete="off">
        <label class="label" for="teamName">Register team leader</label>
        <div class="row">
          <input id="teamName" class="input" placeholder="Team name (unique)" maxlength="24" />
          <button class="btn" type="submit">Enter</button>
        </div>
        <div class="hint">Tip: One team leader registers here, then use the left list to continue the hunt.</div>
      </form>

      <div class="teamListWrap">
        <div id="teamCount" class="meta"></div>
        <ul id="teamList" class="teamList" aria-label="Registered teams"></ul>
      </div>

      <footer class="miniFooter">
        <div class="mini">Think Bits • “Big ideas in small bits”</div>
      </footer>
    </aside>

    <section class="main">
      <div class="card">
        <div class="cardHead">
          <div>
            <div id="activeTeamLabel" class="h1">No team selected</div>
            <div id="activeTeamMeta" class="sub">Register a team, then tap it on the left.</div>
          </div>
          <div class="status">
            <div class="chip" id="chipStep">Step —</div>
            <div class="chip glow" id="chipProgress">Progress —</div>
          </div>
        </div>

        <div class="cardBody">
          <div class="riddleBlock">
            <div id="riddleTitle" class="riddleTitle">Waiting…</div>
            <div id="riddleClue" class="riddleClue">Select a team to generate the first riddle.</div>
          </div>

          <div class="verify">
            <div class="verifyGrid">
              <div>
                <label class="label" for="binaryInput">QR binary (optional)</label>
                <textarea id="binaryInput" class="textarea" rows="3" placeholder="Paste binary from QR (e.g., 1000010) or leave blank"></textarea>
                <div class="hint">You can paste 7/8-bit binary, space/newline separated. We’ll decode to text automatically.</div>
              </div>
              <div>
                <label class="label" for="textInput">Decoded text / answer</label>
                <input id="textInput" class="input" placeholder="Type the decoded text (e.g., B)" maxlength="64" />
                <div class="hint">If you pasted binary, this will auto-fill. Otherwise type your decoded result.</div>
              </div>
            </div>

            <div class="verifyActions">
              <button id="btnDecode" class="btn ghost" type="button">Decode</button>
              <button id="btnCheck" class="btn" type="button" disabled>Check & Unlock</button>
              <button id="btnNext" class="btn primary" type="button" disabled>Generate Next Riddle</button>
            </div>

            <div id="toast" class="toast" role="status" aria-live="polite"></div>
          </div>

          <div class="divider"></div>

          <div class="bottomGrid">
            <div class="miniCard">
              <div class="miniTitle">Live scoreboard</div>
              <div id="scoreboard" class="scoreboard"></div>
            </div>

            <div class="miniCard">
              <div class="miniTitle">Event notes</div>
              <ul class="bullets">
                <li>Teams should not share QR locations; follow volunteers’ instructions.</li>
                <li>No damage to property; misconduct = disqualification.</li>
              </ul>
              <div class="hint">All of the above comes from your event doc—edit text anytime in <code>README.md</code> if needed.</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Rules modal -->
  <dialog id="rulesModal" class="modal">
    <div class="modalHead">
      <div class="modalTitle">Rules & Fair Play</div>
      <button id="btnCloseRules" class="btn ghost" type="button">Close</button>
    </div>
    <div class="modalBody">
      <ul class="bullets">
        <li>No sharing QR locations with other teams.</li>
        <li>No damage to college property (instant DQ).</li>
        <li>Follow volunteers’ instructions at all times.</li>
        <li>Mind the time duration and keep it respectful.</li>
      </ul>
      <p class="hint">These rules are based on the official Think Bits event doc.</p>
    </div>
  </dialog>

  <!-- Admin modal -->
  <dialog id="adminModal" class="modal">
    <div class="modalHead">
      <div class="modalTitle">Admin</div>
      <button id="btnCloseAdmin" class="btn ghost" type="button">Close</button>
    </div>
    <div class="modalBody">
      <div class="adminGrid">
        <div>
          <label class="label" for="adminPin">PIN</label>
          <input id="adminPin" class="input" placeholder="Enter PIN" type="password" />
          <div class="hint">Default PIN is <code>thinkbits</code>. Change it in <code>app.js</code>.</div>
        </div>
        <div class="adminActions">
          <button id="btnExport" class="btn ghost" type="button">Export JSON</button>
          <button id="btnReset" class="btn danger" type="button">Reset All</button>
        </div>
      </div>

      <details class="details">
        <summary>How the hub works</summary>
        <div class="hint">
          Each team has a step counter. A riddle unlocks only when the leader enters the correct decoded result
          (binary → text, or plain text). This makes it easy to manage the central hub on a big screen.
        </div>
      </details>

      <div class="hint">Note: This is a front-end only app (no backend). It saves to this browser using localStorage.</div>
    </div>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
